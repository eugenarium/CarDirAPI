# CarDirAPI
Решение тестового задания от Embedica. Выбрано задание №2.

Это API на ASP.NET, который предоставляет функциональность CRUD для автомобилей.
При наличии свободного времени планирую дописывать дополнительную функциональность.

# О приложении

Начальные данные генерируются с помощью класса _Seed_.


Модели данных:

| Класс | Описание |
| ----- | -------- |
| Car | Автомобиль |
| CarDto | Представление класса Car для работы с пользователем и сокрытия времени создания экземпляра |
| DbStat | Данные о бд, вычисляются через столбец _DateAdded_ в таблице _Cars_ |


### Используемые технологии:
- .NET 7.0
- ASP.NET
- Entity Framework
- SQLite


# Запуск проекта
Для запуска выполните следующие шаги:
1. Установите [.NET Core SDK](https://dotnet.microsoft.com/en-us/download)
2. Установите [SQLite](https://www.sqlite.org/index.html)
3. Клонируйте репозиторий
4. Перейдите в каталог проекта
5. Выполните команду
	
	```dotnet run --launch-profile https```

После этого API будет доступно по адресу https://localhost:7011
# Контроллеры
API имеет два контроллера: __CarsController__ и __DbStatsController__.

## CarsController
Контроллер CarsController предоставляет следующие конечные точки:

### GetCars
Эта конечная точка получает список автомобилей на основе необязательных параметров запроса: brand, color и year.

Т.е. доступны следующие вызовы:

- получение списка всех автомобилей

```
GET /api/cars
```

- фильтрация по одному или нескольким параметрам
```
GET /api/cars?brand=toyota&color=red&year=2020
GET /api/cars?color=red
```
#### Параметры
| Имя | Тип | Описание |
| ------ | ----| ----------- |
| brand | string | Марка автомобиля |
| color | string | Цвет автомобиля |
| year | int | Год выпуска автомобиля |

#### Ответы
| Статус | Описание |
| ----- | ------ |
| 200 OK | Возвращает список автомобилей, которые соответствуют параметрам запроса |
| 404 Not Found | Если автомобили, соответствующие параметрам запроса, не найдены |
### DeleteCar
Эта конечная точка удаляет автомобиль по его номеру.

```
DELETE /api/cars?number=ABC123
```
#### Параметры
| Имя | Тип | Описание |
|---- | --- | -------- |
| number | string | Номер удаляемого автомобиля |
#### Ответы
| Статус | Описание |
| ------ | -------- |
| 204 No Content | Если автомобиль был успешно удален |
| 404 Not Found | Если автомобиль с указанным номером не существует |
### CreateCar
Эта конечная точка создает новый автомобиль.
```
POST /api/cars
```
#### Тело запроса
Тело запроса должно содержать объект CarDto со следующими свойствами:

| Имя | Тип | Описание |
| --- | --- | -------- |
| number | string | Номер автомобиля |
| brand	| string | Марка автомобиля |
| color	| string | Цвет автомобиля |
| releaseYear| int | Год выпуска автомобиля |
#### Ответы
| Статус | Описание |
| ------ | -------- |
| 201 Created | Если автомобиль был успешно создан |
| 400 Bad Request | Если тело запроса недопустимо или если автомобиль с указанным номером уже существует |
| 422 Unprocessable Entity | Если номер автомобиля не соответствует требуемому шаблону или если год выпуска недопустим |
## DbStatsController
Контроллер DbStatsController предоставляет конечную точку для получения статистики об автомобилях в базе данных.

### GetStats
Эта конечная точка получает статистику об автомобилях в базе данных.

```
GET /api/db_stats
```
#### Ответы
| Статус | Описание |
| ------ | -------- |
| 200 OK | Возвращает статистику об автомобилях в базе данных |
| 404 Not Found | Если в базе данных нет автомобилей |
